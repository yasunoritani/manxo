# OSC Bridgeテスト評価基準

## 1. 概要

このドキュメントは、OSC Bridgeテストの評価基準と合格閾値を定義します。Issue 22「Catchテストフレームワークの環境構築とテスト自動化」の一部として作成されました。

## 2. テスト合格基準

### 2.1 必須テスト

以下のテストはすべて合格する必要があります（許容されるテスト失敗はゼロ）：

| テストカテゴリ | 説明 | 合格条件 |
|--------------|------|---------|
| M4Lライフサイクル | M4L環境のライフサイクルイベント処理 | 全テスト合格 |
| 複数インスタンス | 複数OSC Bridgeインスタンスの共存 | 全テスト合格 |
| エラー回復 | 接続喪失後の自動回復 | 全テスト合格 |
| 拡張データ型 | すべてのOSC型サポート | 全テスト合格 |
| 動的ポート割り当て | ポート競合の自動解決 | 全テスト合格 |

### 2.2 パフォーマンステスト

パフォーマンステストは条件付きで合格とみなされます：

| 計測項目 | 最低要件 | 推奨要件 |
|--------|---------|---------|
| スループット | 500メッセージ/秒以上 | 1000メッセージ/秒以上 |
| レイテンシ | 10ms未満（平均） | 5ms未満（平均） |
| CPU使用率 | 20%未満（標準負荷時） | 10%未満（標準負荷時） |

高負荷状況下（1000メッセージ/秒以上）では、レイテンシが20ms未満であれば許容されます。

## 3. テストレポート形式

テスト結果レポートは以下の形式で保存されます：

```
==================================
OSC Bridge テスト実行レポート
実行日時: [DATE]
==================================

[テスト結果の詳細]

==================================
✅ テスト結果: 成功 or ❌ テスト結果: 失敗
==================================
```

## 4. 継続的インテグレーション基準

GitHub Actionsによる自動テストでは以下の条件が必要です：

1. すべての必須テストの合格
2. 両方のプラットフォーム（Intel Mac、Apple Silicon Mac）での動作確認
3. パフォーマンステストの最低要件を満たすこと

## 5. リグレッションテスト

新機能追加時には、以下の手順でリグレッションテストを実施します：

1. 既存のすべてのテストを実行し、変更前の結果と比較
2. パフォーマンス指標が10%以上低下していないことを確認
3. 新機能に対する新たなテストケースを追加

## 6. 参考指標

テスト品質を継続的に向上させるための参考指標：

- コードカバレッジ: 目標80%以上
- テスト実行時間: 全テスト5分以内
- 安定性: 同一環境で5回連続実行時に結果が一貫していること
